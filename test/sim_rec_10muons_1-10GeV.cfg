process Rec = 
{
   untracked PSet maxEvents = {untracked int32 input = 2}

   include "Configuration/StandardSequences/data/FakeConditions.cff"
   untracked PSet options = {
      include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
      untracked bool wantSummary = true
      untracked bool makeTriggerResults = true 
   }
   # include services
   include "Configuration/ReleaseValidation/data/Services.cfi"
 
  # include "Configuration/Examples/data/MessageLogger.cfi"
  service = MessageLogger {
     untracked vstring destinations = {"cout"}
     untracked PSet cout           = { 
        untracked string threshold = "INFO" 
        untracked PSet default     = { untracked int32 limit    = 1000000}
     }
  }



   source = FlatRandomPtGunSource
   {
      string psethack  = "10 mu pt 10"	
      untracked uint32 firstRun = 1
      untracked PSet PGunParameters =
      {
         # you can request more than 1 particle
         untracked vint32  PartID = {13, -13, 13, -13, 13, -13, 13, -13, 13, -13}
         untracked double MinEta = -2.5
         untracked double MaxEta =  2.5
         untracked double MinPhi = -3.14159265358979323846 # in radians
         untracked double MaxPhi =  3.14159265358979323846
         untracked double MinPt  =  0.99
         untracked double MaxPt  = 10.01
      }
   }

   include "Configuration/StandardSequences/data/Reconstruction.cff"
   include "Configuration/StandardSequences/data/Simulation.cff"
   include "Configuration/StandardSequences/data/MixingNoPileUp.cff" 
   include "Configuration/StandardSequences/data/VtxSmearedNoSmear.cff" 

   replace offlinePrimaryVerticesFromCTFTracks.verbose = true
   replace offlinePrimaryVerticesFromRSTracks.verbose = true


   path p1 = {psim} # simulation
   path p2 = {pdigi} # digitization
   path p3 = {trackerlocalreco,ckftracks,rstracks,GsfGlobalElectronSequence} # reconstruction

   # Event output
   include "Configuration/EventContent/data/EventContent.cff"


   module FEVT = PoolOutputModule 
   { 
      using FEVTSIMEventContent
      untracked string fileName = "sim_rec_10muons_1-10GeV.root"
      untracked PSet datasets ={
        untracked PSet dataset1 = { untracked string dataTier = "FEVT" }
      }
   }
    
   endpath outpath = {FEVT}

   schedule = {p1,p2,p3,outpath}

}
